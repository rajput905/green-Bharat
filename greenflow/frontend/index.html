<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GreenFlow AI â€“ Command Center</title>
  <meta name="description"
    content="GreenFlow AI: real-time environmental intelligence. COâ‚‚ predictions, risk meter, AI recommendations." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <header>
    <div class="logo">
      <span class="logo-icon">ğŸŒ¿</span>
      GreenFlow <span>AI</span>
    </div>
    <div class="header-right">
      <div class="header-time" id="clock">â€”</div>
      <div id="pill" class="status-pill">
        <div class="dot"></div>
        <span id="pill-text">Connectingâ€¦</span>
      </div>
    </div>
  </header>

  <!-- â”€â”€ Main â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <main>

    <!-- KPI Row -->
    <div class="section-title">ğŸ“Š Live Telemetry</div>
    <div class="kpi-grid" id="kpi-grid">
      <div class="kpi-card" style="--accent-color:#22c55e">
        <div class="kpi-icon">âš¡</div>
        <div class="kpi-label">Events Received</div>
        <div id="kpi-events" class="kpi-value" style="color:#22c55e">0</div>
        <div class="kpi-sub">Since page load</div>
      </div>
      <div class="kpi-card" style="--accent-color:#3b82f6">
        <div class="kpi-icon">ğŸ’¨</div>
        <div class="kpi-label">COâ‚‚ (Latest)</div>
        <div id="kpi-co2" class="kpi-value" style="color:#3b82f6">â€”</div>
        <div class="kpi-sub" id="kpi-co2-sub">ppm</div>
      </div>
      <div class="kpi-card" style="--accent-color:#f59e0b">
        <div class="kpi-icon">ğŸŒ¡ï¸</div>
        <div class="kpi-label">Temperature</div>
        <div id="kpi-temp" class="kpi-value" style="color:#f59e0b">â€” Â°C</div>
        <div class="kpi-sub">Latest reading</div>
      </div>
      <div class="kpi-card" style="--accent-color:#8b5cf6">
        <div class="kpi-icon">ğŸ’§</div>
        <div class="kpi-label">AQI Index</div>
        <div id="kpi-aqi" class="kpi-value" style="color:#8b5cf6">â€”</div>
        <div class="kpi-sub">Air quality index</div>
      </div>
      <div class="kpi-card" style="--accent-color:#22c55e">
        <div class="kpi-icon">ğŸ“ˆ</div>
        <div class="kpi-label">Avg Carbon Score</div>
        <div id="kpi-score" class="kpi-value" style="color:#22c55e">â€”</div>
        <div class="kpi-sub">Higher = more relevant</div>
      </div>
    </div>

    <!-- Intelligence Grid -->
    <div class="section-title">ğŸ§  AI Intelligence Layer</div>
    <div class="intel-grid">

      <!-- 1. COâ‚‚ Prediction Card -->
      <div class="card" id="co2-pred-card">
        <div class="card-header">
          <div class="card-title">ğŸ”® COâ‚‚ 30-Min Forecast</div>
          <span class="card-badge" id="pred-badge">Loadingâ€¦</span>
        </div>
        <div class="co2-value-big" id="pred-value">â€”<span class="co2-unit">ppm</span></div>
        <div class="prediction-row">
          <div class="trend-arrow" id="trend-arrow">â†’</div>
          <div class="confidence-bar-wrap">
            <div class="confidence-label">Prediction Confidence</div>
            <div class="confidence-bar">
              <div class="confidence-fill" id="conf-fill" style="width:0%"></div>
            </div>
            <div class="confidence-pct" id="conf-pct">â€”%</div>
          </div>
        </div>
        <div style="margin-top:.85rem;font-size:.72rem;color:var(--muted)">
          Current: <span id="current-co2" style="color:var(--text);font-family:'JetBrains Mono',monospace">â€”</span> ppm
          &nbsp;Â·&nbsp; Trend: <span id="trend-label" style="color:var(--accent2)">â€”</span>
        </div>
      </div>

      <!-- 2. Risk Meter Card -->
      <div class="card" id="risk-card">
        <div class="card-header">
          <div class="card-title">âš ï¸ Environmental Risk</div>
          <span class="card-badge" id="risk-badge">Loadingâ€¦</span>
        </div>
        <div class="gauge-wrap">
          <div class="gauge-svg-wrap">
            <svg id="gauge-svg" viewBox="0 0 180 110" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10,100 A80,80 0 0,1 57,28" stroke="#22c55e" stroke-width="14" stroke-linecap="round" />
              <path d="M57,28 A80,80 0 0,1 95,11" stroke="#f59e0b" stroke-width="14" stroke-linecap="round" />
              <path d="M95,11 A80,80 0 0,1 135,22" stroke="#f97316" stroke-width="14" stroke-linecap="round" />
              <path d="M135,22 A80,80 0 0,1 170,100" stroke="#ef4444" stroke-width="14" stroke-linecap="round" />
              <line id="gauge-needle" x1="90" y1="100" x2="90" y2="28" stroke="white" stroke-width="2.5"
                stroke-linecap="round" class="gauge-needle" transform="rotate(-90, 90, 100)" />
              <circle cx="90" cy="100" r="5" fill="white" />
            </svg>
          </div>
          <div class="gauge-value-center">
            <div class="gauge-score" id="gauge-score">â€”</div>
            <div class="gauge-level" id="gauge-level">â€”</div>
          </div>
          <div class="gauge-legend">
            <span><span class="legend-dot" style="background:#22c55e"></span>Safe</span>
            <span><span class="legend-dot" style="background:#f59e0b"></span>Moderate</span>
            <span><span class="legend-dot" style="background:#f97316"></span>High</span>
            <span><span class="legend-dot" style="background:#ef4444"></span>Critical</span>
          </div>
        </div>
      </div>

      <!-- 3. AI Recommendation Panel -->
      <div class="card rec-panel" id="rec-panel">
        <div class="card-header">
          <div class="card-title">ğŸ¤– AI Recommendation</div>
          <span class="card-badge" id="rec-update-badge">â€”</span>
        </div>
        <div class="rec-action-level safe" id="rec-action-level">
          <span>â—</span> Monitoring
        </div>
        <div id="rec-list"></div>
        <div class="rec-explanation" id="rec-explanation">
          Fetching AI analysisâ€¦
        </div>
      </div>

    </div><!-- /intel-grid -->

    <!-- Row 2: Simulator + Executive Summary -->
    <div class="intel-grid" style="grid-template-columns: 1fr 2fr;">

      <!-- 4. What-If Simulator -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">ğŸ”§ What-if Simulator</div>
          <span class="card-badge" id="sim-badge">API-powered</span>
        </div>

        <div class="sim-row">
          <div class="sim-label">ğŸš— Traffic Cut</div>
          <input type="range" min="0" max="100" value="0" class="sim-slider" id="traffic-slider"
            oninput="updateSimulator()" />
          <div class="sim-val" id="traffic-val">0%</div>
        </div>
        <div class="sim-row">
          <div class="sim-label">ğŸ’¨ Ventilation</div>
          <input type="range" min="0" max="100" value="0" class="sim-slider" id="ventilation-slider"
            oninput="updateSimulator()" />
          <div class="sim-val" id="ventilation-val">0%</div>
        </div>
        <div class="sim-row">
          <div class="sim-label">ğŸ­ Industry Cut</div>
          <input type="range" min="0" max="100" value="0" class="sim-slider" id="industry-slider"
            oninput="updateSimulator()" />
          <div class="sim-val" id="industry-val">0%</div>
        </div>

        <div class="sim-result">
          <div class="sim-metric">
            <div class="sim-metric-label">Projected COâ‚‚</div>
            <div class="sim-metric-val" id="sim-co2" style="color:#3b82f6">â€”</div>
            <div class="sim-metric-delta" id="sim-co2-delta">â€”</div>
          </div>
          <div class="sim-metric">
            <div class="sim-metric-label">Projected Risk</div>
            <div class="sim-metric-val" id="sim-risk" style="color:#22c55e">â€”</div>
            <div class="sim-metric-delta" id="sim-risk-delta">â€”</div>
          </div>
          <div class="sim-metric">
            <div class="sim-metric-label">COâ‚‚ Reduction</div>
            <div class="sim-metric-val delta-pos" id="sim-saving">â€”</div>
            <div class="sim-metric-delta" style="color:var(--muted)">ppm saved</div>
          </div>
          <div class="sim-metric">
            <div class="sim-metric-label">Safety Level</div>
            <div class="sim-metric-val" id="sim-safety" style="color:#22c55e; font-size:1rem;">â€”</div>
            <div class="sim-metric-delta" style="color:var(--muted)">projected</div>
          </div>
        </div>
      </div>

      <!-- 5. Executive Summary Card -->
      <div class="card exec-card">
        <div class="exec-header-row">
          <div class="card-title">ğŸ“‹ Executive Summary</div>
          <div class="exec-countdown" id="exec-countdown-wrap">
            <svg class="exec-countdown-ring" viewBox="0 0 22 22">
              <circle cx="11" cy="11" r="9" stroke="var(--border2)" stroke-width="2" fill="none" />
              <circle id="countdown-ring" cx="11" cy="11" r="9" stroke="var(--accent2)" stroke-width="2" fill="none"
                stroke-dasharray="56.5" stroke-dashoffset="0" stroke-linecap="round" transform="rotate(-90, 11, 11)"
                style="transition: stroke-dashoffset 1s linear" />
            </svg>
            Refresh in <span id="exec-countdown">60</span>s
          </div>
        </div>
        <div class="exec-body" id="exec-body">
          <em style="color:var(--muted)">AI-generated executive briefing loadingâ€¦</em>
        </div>
        <div class="exec-meta" id="exec-meta">
          <div class="exec-meta-chip">ğŸŒ City: <span id="meta-city">New Delhi</span></div>
          <div class="exec-meta-chip">ğŸ’¨ COâ‚‚ Status: <span id="meta-co2-status">â€”</span></div>
          <div class="exec-meta-chip">âš ï¸ Risk: <span id="meta-risk">â€”</span></div>
          <div class="exec-meta-chip">ğŸ• Updated: <span id="meta-updated">â€”</span></div>
        </div>
      </div>

    </div><!-- /row2 -->

    <!-- Live Feed + AI Chat -->
    <div class="section-title">ğŸ“¡ Live Intelligence Feed</div>
    <div class="bottom-grid">

      <div class="card">
        <div class="card-header">
          <div class="card-title">ğŸ“¡ Live Event Feed <span class="card-badge live" id="feed-count">0 events</span></div>
        </div>
        <div id="feed"></div>
      </div>

      <div class="card">
        <div class="card-title" style="margin-bottom:1rem">ğŸ¤– Ask GreenFlow AI</div>
        <div class="query-form">
          <textarea id="user-question" placeholder="e.g. Why is COâ‚‚ rising? Is it safe outside?"></textarea>
          <button id="ask-btn" class="btn btn-primary" onclick="askQuestion()">âš¡ Ask AI</button>
          <div id="answer-box"></div>
        </div>
      </div>

    </div>

  </main>

  <footer>Â© 2025 GreenFlow AI Â· Powered by Pathway + FastAPI Â· Real-time Environmental Intelligence</footer>

  <script src="script.js"></script>
</body>

</html>